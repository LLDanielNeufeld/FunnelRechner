<!DOCTYPE html>
<html>
<head>
    <title>Funnel Analytics</title>
    <!-- React, ReactDOM und Recharts -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/recharts@2.10.3/umd/Recharts.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #1e1e2f;
            color: #f5f5f5;
            margin: 0;
            padding: 0;
        }
        #funnel-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        h2 {
            color: #ffffff;
            text-align: center;
        }
        input {
            color: #ffffff;
            background: #2a2a3f;
            border: 1px solid #444;
        }
        input:focus {
            outline: none;
            border-color: #3b82f6;
        }
    </style>
</head>
<body>
    <div id="funnel-container">
        <h2>Ecommerce Funnel Analysis</h2>
        <div id="chart" style="height: 400px; margin-bottom: 20px;"></div>
    </div>

    <script>
        // Minimaler Testaufbau für Recharts
        if (typeof React === 'undefined' || typeof ReactDOM === 'undefined') {
            console.error('React oder ReactDOM ist nicht definiert. Überprüfe die Bibliotheken.');
        } else if (typeof Recharts === 'undefined') {
            console.error('Recharts ist nicht definiert. Überprüfe die Bibliothek.');
        } else {
            try {
                const { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } = Recharts;

                const data = [
                    { stage: 'Page Views', users: 100000 },
                    { stage: 'Product Views', users: 45000 },
                    { stage: 'Add to Cart', users: 15000 },
                    { stage: 'Checkout Started', users: 7500 },
                    { stage: 'Purchases', users: 3000 }
                ];

                const chart = React.createElement(ResponsiveContainer, { width: '100%', height: 400 },
                    React.createElement(BarChart, { data: data, layout: 'vertical' },
                        React.createElement(CartesianGrid, { strokeDasharray: '3 3' }),
                        React.createElement(XAxis, { type: 'number', stroke: '#fff' }),
                        React.createElement(YAxis, { dataKey: 'stage', type: 'category', stroke: '#fff' }),
                        React.createElement(Tooltip, {
                            contentStyle: { backgroundColor: '#1e1e2f', color: '#fff', border: 'none' },
                            cursor: { fill: 'rgba(255, 255, 255, 0.1)' }
                        }),
                        React.createElement(Bar, { dataKey: 'users', fill: '#3b82f6' })
                    )
                );

                ReactDOM.render(chart, document.getElementById('chart'));
            } catch (error) {
                console.error('Fehler beim Rendern des Diagramms:', error);
            }
        }
    </script>
</body>
</html>
